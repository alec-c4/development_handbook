# Подход к разработке

## Постановка задач

1. Задачи берутся из трекера и только из него. Если задача прилетела в почте или мессенджере - она должна быть перенесена в трекер
2. Если задачи нет в трекере, то её не существует. **[В редких случаях]** задача может быть описана постфактум, но должна быть обязательно описана и задокументирована
3. У задачи **[должно]** быть качественное описание - цель задачи, входящие значения, происходящий процесс и что должно быть на выходе. Если описания нет - задача отправляется на переоформление.
4. У задач, для которых требуется фронтенд-разработка, должен быть сделан дизайн. Если нет дизайна - задача уходит на переоформление
5. У задачи должен быть срок начала и срок завершения (планируемые и фактические)
6. Длительность задачи должна быть не более 1 дня, если задача длиннее, то она должна быть раздроблена на мелкие задачи
7. У задачи должен быть приоритет. Задачи должны выполняться согласно приоритету
8. Все задачи должны быть описаны в трекере в едином формате
9. Запрещено создавать мета-задачи без четких критериев выполнения
10. Каждая задача должна иметь уникальный идентификатор

## Формат описания задач

1. **Заголовок** - краткое, но информативное название задачи (не более 80 символов)
2. **Описание** - подробное описание задачи, включающее:
   - Бизнес-обоснование (почему это важно)
   - Технический контекст (что нужно знать для выполнения)
   - Ожидаемый результат (что должно получиться)
3. **Ссылка на дизайн** - ссылка на макеты в Figma/Zeplin/etc. (в случае frontend-задач)
4. **Входные параметры и условия** - предусловия для выполнения задачи:
   - Начальное состояние системы
   - Требуемые разрешения/права пользователя
   - Источники данных
   - Предварительные условия (например, пользователь должен быть залогинен, подключена услуга и т.д.)
5. **Выходные параметры** - что должно измениться в итоге:
   - Конечное состояние системы
   - Изменения в базе данных
   - Изменения в пользовательском интерфейсе
   - API-ответы
6. **Позитивные сценарии** - описание поведения системы, когда пользователь выполняет все действия корректно
7. **Негативные сценарии** - описание поведения системы при некорректных действиях пользователя или при сбоях:
   - Реакция на некорректные входные данные
   - Обработка исключительных ситуаций
   - Сообщения об ошибках
8. **Критерии валидации данных** - правила проверки корректности входных данных:
   - Требования к формату ввода
   - Ограничения на значения
   - Правила валидации (например, сложность пароля, допустимые символы в логине и т.д.)
9. **Тексты интерфейса** - тексты для элементов интерфейса на всех поддерживаемых языках:
   - Тексты кнопок
   - Уведомления
   - Сообщения об ошибках
   - Тексты email-уведомлений
10. **Требования к доступности (a11y)** - требования для обеспечения доступности интерфейса:
    - Контрастность
    - Масштабируемость
    - Поддержка скринридеров
    - Управление с клавиатуры
11. **Ролевой доступ** - для каких пользовательских ролей должна быть доступна функциональность
12. **Критерии приемки** - четкие и измеримые критерии, по которым можно определить, что задача выполнена
13. **Definition of Done** - перечень требований к качеству и полноте выполнения задачи
14. **Оценка сложности** - в story points (1, 2, 3, 5, 8, 13) - последовательность Фибоначчи
15. **Приоритет** - согласно принятой системе приоритизации
16. **Зависимости** - от каких задач зависит выполнение и какие задачи зависят от текущей
17. **Теги/метки** - для категоризации и фильтрации
18. **Исполнитель** - кто отвечает за выполнение задачи
19. **Аудитор** - кто проверяет выполнение задачи
20. **Сроки** - дедлайн и предполагаемое время выполнения

## Формат описания багов

1. **Заголовок** - краткое, но информативное название проблемы (не более 80 символов)
2. **Дата и время события** - когда была обнаружена проблема
3. **Информация об окружении**:
   - Тип и модель устройства (для мобильных приложений)
   - Браузер и его версия (для веб-приложений)
   - Версия и тип операционной системы
   - Версия приложения
   - Сетевое окружение (WiFi/мобильная сеть/VPN)
4. **Шаги воспроизведения** - последовательные действия для воспроизведения проблемы:
   - Начальное состояние (например, "Пользователь авторизован")
   - Пронумерованные шаги для воспроизведения бага
   - Параметры, используемые при воспроизведении (например, конкретные значения полей)
5. **Фактический результат** - что произошло в итоге:
   - Текстовое описание проблемы
   - Скриншоты или видео, демонстрирующие проблему
   - Логи или сообщения об ошибках
6. **Ожидаемый результат** - как система должна была работать корректно
7. **Воспроизводимость** - насколько стабильно воспроизводится проблема:
   - Всегда (100%)
   - Часто (примерно 75%)
   - Иногда (примерно 50%)
   - Редко (менее 25%)
8. **Масштаб проблемы**:
   - На скольких устройствах повторяется
   - Сколько пользователей затрагивает
   - Есть ли обходное решение
9. **Серьезность (Severity)**:
   - Критическая - блокирует работу системы
   - Высокая - серьезно нарушает функциональность
   - Средняя - затрудняет использование
   - Низкая - незначительные проблемы
10. **Приоритет** - насколько срочно требуется исправление
11. **Дополнительные материалы**:
    - HAR-файлы для веб-приложений
    - Дамп памяти
    - Идентификаторы сессий/запросов
    - Имя пользователя/аккаунта (при необходимости)

## Выполнение задач (ежедневный план)

1. Перед стартом работы прочитать задачу, отметить в трекере своё участие
2. Уточнить - ничего ли не мешает работе, если что-то мешает - запросить помощь или информацию у коллег
3. Стартовать новую фичу в git flow
4. Взять ТИПОВОЕ решение-библиотеку-платформу из используемых в компании (см. в соответствующем разделе), если не нашёл - согласовать с вышестоящим техническим руководителем использование иного решения
5. Если есть готовый проверенный код (проверить наличие в библиотеке кода) - использовать его
6. Проверить - не написал ли кто-то из разработчиков на проекте код, который можно переиспользовать. Избегать дублирования функционала.
7. Написать тесты для кода и запустить их
8. Протестировать реализованную задачу
9. Протестировать функции приложение, которые могут быть затронуты сделанной работой
10. Задокументировать работу
11. Проверить на производительность (если это фронтенд, то с помощью [Lighthouse](https://developers.google.com/web/tools/lighthouse))
12. (если применимо) Проверить на соответствие i18n
13. (если применимо) Проверить на соответствие A11y
14. Запустить автоматическую проверку кода - линтер, профилер и так далее, поправить код при необходимости
15. Отметить задачу сделанной в трекере
16. Удалить лишние и тестовые данные из кода, убедиться в отсутствии в коде жестко зашитых конфигурационных значений, ключей и паролей
17. Отгрузить код в github с использованием механизмов [pull request (PR)](https://rustycrate.ru/%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%B0/2016/03/07/contributing.html), назначить технического руководителя ответственным за аудит написанного кода
18. Выложить завершенные задачи на тестовую и стейджинговую зоны (если автодеплой не настроен) по согласованию с техническим руководителем
19. В конце дня, даже если задачи не закончены - отгрузить весь код в GitHub с пометкой wip (work in progress)
20. Удалить лишние бранчи (ветки)
21. Если сроки реализации не совпали с ожидаемыми - отметить это и указать причину
22. Сообщить о сделанной работе, встреченных проблемах и дополнительных требованиях менеджеру проекта и техническому руководителю в конце рабочего дня по всем сделанным задачам

## Дополнительные положения

1. Код, который возможно использовать на других проектах, должен быть сохранён в архив/библиотеку исходного кода. Туда же должны быть сохранены решения нестандартных проблем, которые удалось найти на форумах и в блогах (с сохранением ссылки на источник)
2. Если часть кода проекта может быть востребована и доработана в других проектах (в том числе - разработчиками других компаний), то следует выпустить open source проект на аккаунте компании и обратиться к старшему техническому руководителю для продвижения репозитария
3. Если какие-то задачи регулярно повторяются, то имеет смысл использовать инструменты автоматизации, например - сделать шаблон
4. Коммиты в гите должны соответствовать стилю [https://www.conventionalcommits.org](https://www.conventionalcommits.org) Перед стартом проекта должен быть составлен список всех доступных scope
5. Для каждого релиза должен быть написан Changelog, соответствующий стандарту [https://keepachangelog.com/](https://keepachangelog.com/)

## Релизная политика

Рекомендуемый подход - это частые релизы с небольшой функциональностью. Каждый релиз перед тем, как быть выложенным на production-сервер должен пройти тестирование на staging-сервере, чтобы убедиться, что в нем отсутствуют критические проблемы. Частота релизов - 1 раз в день, то есть в первый день проходят тестирование на staging-сервере, на второй день релиз публикуется на production-сервере. Деплой происходит с применением подхода release train (<https://habr.com/ru/companies/dododev/articles/706158/>). В дальнейшем длительность цикла релиза может быть увеличена, в зависимости от потребностей команды и роста продукта.
